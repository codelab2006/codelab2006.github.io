<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><title> TypeScript 笔记三（类） - 黄永健的个人站点 </title><link rel="stylesheet" href="/assets/css/icons.css"/><link rel="stylesheet" href="/assets/css/normalize.css"/><link rel="stylesheet" href="/assets/css/styles.css"/></head><body class="d-flex flex-direction-column"><header class="p-relative"><div class="d-flex h-4 px-8px bg-primary text-light align-items-center justify-content-space-between"><h1>网络日志</h1><button id="nav-toggler" class="icon-nav-toggler"></button></div><div id="nav-container" class="bg-primary px-8px align-items-center"><nav><ul class="d-flex"><li class="mx-16px my-16px"><a class="text-light" href="/">首页</a></li><li class="mx-16px my-16px"><a class="text-light" href="/blog">网络日志</a></li><li class="mx-16px my-16px"><a class="text-light" href="/codelab">Codelab</a></li><li class="mx-16px my-16px"><a class="text-light" href="/about.html">关于作者</a></li></ul></nav></div></header><main class="flex-grow-1"><div class="d-flex justify-content-center my-48px px-8px"><article class="container"><h2 class="p-6px bb-1px"> TypeScript 笔记三（类） </h2><div class="my-16px"><span class="d-block p-6px">作者：黄永健</span><span class="d-block p-6px">日期：2020-03-03</span></div><div class="my-32px p-6px content"><h3 id="classes">Classes</h3><p>TypeScript 中的类和其他面向对象语言中的类有很多相似之处。下面的代码段描述了类的一些基本特性：</p><ul><li>类的定义。</li><li>继承。</li><li>Public，Protected，Private。</li><li>Static 属性。</li><li>Readonly 属性。</li><li>访问器。</li><li>抽象类。</li><li>接口的实现。</li></ul><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">O</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">readonly</span> <span class="nx">clazz</span><span class="p">:</span> <span class="nx">string</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Object class</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// O.clazz = 'ABC'; // Error</span>

<span class="kd">class</span> <span class="nx">Point</span> <span class="kd">extends</span> <span class="nx">O</span> <span class="p">{</span>
  <span class="kd">set</span> <span class="nx">x</span><span class="p">(</span><span class="nx">v</span><span class="p">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`set x: </span><span class="p">${</span><span class="nx">v</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_x</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="p">?</span> <span class="mi">1000</span> <span class="p">:</span> <span class="nx">v</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">get</span> <span class="nx">x</span><span class="p">():</span> <span class="nx">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_x</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">set</span> <span class="nx">y</span><span class="p">(</span><span class="nx">v</span><span class="p">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`set y: </span><span class="p">${</span><span class="nx">v</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_y</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="p">?</span> <span class="mi">1000</span> <span class="p">:</span> <span class="nx">v</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">get</span> <span class="nx">y</span><span class="p">():</span> <span class="nx">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_y</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">_x</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">_y</span><span class="p">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Renderable</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Movable</span> <span class="p">{</span>
  <span class="nx">move</span><span class="p">(</span><span class="nx">xOffset</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">yOffset</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">abstract</span> <span class="kd">class</span> <span class="nx">Sprite</span> <span class="kd">extends</span> <span class="nx">O</span> <span class="kr">implements</span> <span class="nx">Renderable</span> <span class="p">{</span>
  <span class="kr">private</span> <span class="nx">origin</span><span class="p">:</span> <span class="nx">Point</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">y</span><span class="p">:</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">origin</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOffset</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
      <span class="s2">`</span><span class="p">${</span><span class="nx">O</span><span class="p">.</span><span class="nx">clazz</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="kd">constructor</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> Render -&gt; x: </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">x</span><span class="p">}</span><span class="s2">, y: </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">origin</span><span class="p">.</span><span class="nx">y</span><span class="p">}</span><span class="s2">`</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="kr">protected</span> <span class="nx">abstract</span> <span class="nx">getOffset</span><span class="p">():</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span> <span class="nl">y</span><span class="p">:</span> <span class="nx">number</span> <span class="p">};</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">Player</span> <span class="kd">extends</span> <span class="nx">Sprite</span> <span class="kr">implements</span> <span class="nx">Movable</span> <span class="p">{</span>
  <span class="kr">private</span> <span class="na">xOffset</span><span class="p">:</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kr">private</span> <span class="na">yOffset</span><span class="p">:</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kr">protected</span> <span class="nx">getOffset</span><span class="p">():</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span> <span class="nl">y</span><span class="p">:</span> <span class="nx">number</span> <span class="p">}</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">offset</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">xOffset</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">yOffset</span> <span class="p">};</span>
    <span class="k">return</span> <span class="nx">offset</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">move</span><span class="p">(</span><span class="na">xOffset</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="na">yOffset</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">=</span> <span class="nx">xOffset</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="nx">yOffset</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">Monster</span> <span class="kd">extends</span> <span class="nx">Sprite</span> <span class="kr">implements</span> <span class="nx">Movable</span> <span class="p">{</span>
  <span class="kr">private</span> <span class="na">xOffset</span><span class="p">:</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kr">private</span> <span class="na">yOffset</span><span class="p">:</span> <span class="nx">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kr">protected</span> <span class="nx">getOffset</span><span class="p">():</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span> <span class="nl">y</span><span class="p">:</span> <span class="nx">number</span> <span class="p">}</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">offset</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">xOffset</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">yOffset</span> <span class="p">};</span>
    <span class="k">return</span> <span class="nx">offset</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">move</span><span class="p">(</span><span class="na">xOffset</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="na">yOffset</span><span class="p">:</span> <span class="nx">number</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">=</span> <span class="nx">xOffset</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="nx">yOffset</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="na">player</span><span class="p">:</span> <span class="nx">Player</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Player</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="kd">let</span> <span class="na">monster</span><span class="p">:</span> <span class="nx">Monster</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Monster</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nx">monster</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="nx">monster</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">);</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nx">monster</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">);</span>
<span class="nx">monster</span><span class="p">.</span><span class="nx">move</span><span class="p">(</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">);</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
<span class="nx">monster</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
</code></pre></div></div></div></article></div></main><footer class="min-h-16 px-8px bg-primary p-relative"><div id="footer-panel" class="bg-primary px-8px"></div></footer><script src="/assets/js/script.js"></script></body></html>